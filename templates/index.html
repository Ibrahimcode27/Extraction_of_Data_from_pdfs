<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload PDF</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <script>
        // Predefined topics for each subject
        const topicsBySubject = {
            "Physics": ["Mechanics", "Thermodynamics", "Electrodynamics", "Optics", "Quantum Physics"],
            "Chemistry": ["Organic Chemistry", "Inorganic Chemistry", "Physical Chemistry", "Biochemistry"],
            "Mathematics": ["Algebra", "Calculus", "Geometry", "Trigonometry", "Statistics"],
            "Biology": ["Cell Biology", "Genetics", "Ecology", "Human Anatomy", "Plant Physiology"],
            "Other": ["General Topics"]
        };

        // Populate topics based on the selected subject
        function populateTopics() {
            const subjectSelect = document.getElementById('subject');
            const topicSelect = document.getElementById('topic');

            // Clear existing options
            topicSelect.innerHTML = '<option value="">Select Topic</option>';

            // Get the selected subject
            const selectedSubject = subjectSelect.value;

            // Populate the topics dropdown
            if (topicsBySubject[selectedSubject]) {
                topicsBySubject[selectedSubject].forEach(topic => {
                    const option = document.createElement('option');
                    option.value = topic;
                    option.textContent = topic;
                    topicSelect.appendChild(option);
                });
            }
        }

        // Add event listener to ensure the script works even if JS loads before HTML
        window.onload = function () {
            const subjectSelect = document.getElementById('subject');
            subjectSelect.addEventListener('change', populateTopics);
        };
    </script>
</head>
<body>
    <div class="container">
        <div class="card">
            <h1>Upload PDF</h1>
            <form action="/success" method="post" enctype="multipart/form-data">
                <label for="file">Select PDF:</label>
                <input type="file" name="file" id="file" accept=".pdf" required><br><br>

                <label for="exam_type">Select Exam Type:</label>
                <select name="exam_type" id="exam_type" required>
                    <option value="JEE">JEE</option>
                    <option value="NEET">NEET</option>
                    <option value="GATE">GATE</option>
                    <option value="Other">Other</option>
                </select><br><br>

                <label for="subject">Select Subject:</label>
                <select name="subject" id="subject" required>
                    <option value="">Select Subject</option>
                    <option value="Physics">Physics</option>
                    <option value="Chemistry">Chemistry</option>
                    <option value="Mathematics">Mathematics</option>
                    <option value="Biology">Biology</option>
                    <option value="Other">Other</option>
                </select><br><br>

                <label for="topic">Select Topic:</label>
                <select name="topic" id="topic" required>
                    <option value="">Select Topic</option>
                </select><br><br>

                <button type="submit">Upload</button>
            </form>
        </div>
    </div>
</body>
</html>